# Version currently required by ml-sharp is 3.13 series, not newer or older
VERSION=3.13

export PYENV_ROOT="$PWD/pyenv"
if [[ ! -d $PYENV_ROOT/bin ]]; then
  echo "Attempting to install pyenv"
  (curl -fsSL https://pyenv.run | bash) || exit 1
  echo "^ You may ignore warnings about adding pyenv to your PATH"
fi

export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init - bash)"
eval "$(pyenv virtualenv-init -)"

if ! command -v pyenv > /dev/null; then
  echo "Failed to set up pyenv."
  exit 1
fi

ls $PYENV_ROOT/versions/$VERSION.* || pyenv install $VERSION || exit 1

pyenv shell $VERSION || exit 1

echo "printing python location"
which python

echo "** python is ready"
